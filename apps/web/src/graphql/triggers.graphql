# Trigger related operations

fragment TriggerFields on TriggerDto {
  id
  zoneId
  name
  attachType
  numArgs
  argList
  commands
  mobZoneId
  mobId
  objectZoneId
  objectId
  variables
  flags
  needsReview
  syntaxError
  createdAt
  updatedAt
  createdBy
  updatedBy
}

query GetTriggers {
  triggers {
    ...TriggerFields
  }
}

query GetTriggersNeedingReview {
  triggersNeedingReview {
    ...TriggerFields
  }
}

query GetTriggersNeedingReviewCount {
  triggersNeedingReviewCount
}

query GetTrigger($zoneId: Int!, $id: Int!) {
  trigger(zoneId: $zoneId, id: $id) {
    ...TriggerFields
  }
}

query GetTriggersByAttachment($attachType: ScriptType!, $zoneId: Int!, $entityId: Int!) {
  triggersByAttachment(attachType: $attachType, zoneId: $zoneId, entityId: $entityId) {
    ...TriggerFields
  }
}

mutation CreateTrigger($input: CreateTriggerInput!) {
  createTrigger(input: $input) {
    ...TriggerFields
  }
}

mutation UpdateTrigger($zoneId: Int!, $id: Int!, $input: UpdateTriggerInput!) {
  updateTrigger(zoneId: $zoneId, id: $id, input: $input) {
    ...TriggerFields
  }
}

mutation DeleteTrigger($zoneId: Int!, $id: Int!) {
  deleteTrigger(zoneId: $zoneId, id: $id) {
    id
    zoneId
  }
}

mutation AttachTrigger($input: AttachTriggerInput!) {
  attachTrigger(input: $input) {
    ...TriggerFields
  }
}

mutation DetachTrigger($zoneId: Int!, $id: Int!) {
  detachTrigger(zoneId: $zoneId, id: $id) {
    id
    zoneId
  }
}

mutation MarkTriggerReviewed($zoneId: Int!, $id: Int!) {
  markTriggerReviewed(zoneId: $zoneId, id: $id) {
    ...TriggerFields
  }
}
